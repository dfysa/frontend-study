<view class="detail-container">
  <view class="post-card" wx:if="{{question}}">
    <view class="post-header">
      <image src="{{question.avatar}}" class="avatar" />
      <view class="user-info">
        <text class="username">{{question.accountname}}</text>
        <text class="timestamp">{{formattedTime}}</text>
      </view>
      <view wx:if="{{isOwner}}" class="more-options">
        <button class="shenglue" bindtap="toggleOptions">...</button>
        <view wx:if="{{showOptions}}" class="dropdown-menu">
          <button class="edit" bindtap="editQuestion">ç¼–è¾‘</button>
          <button class="edit" bindtap="deleteQuestion">åˆ é™¤</button>
        </view>
      </view>
    </view>
    <view wx:if="{{!isEditing}}">
      <view class="title">{{question.title}}</view>
      <rich-text nodes="{{question.content}}" class="content"></rich-text>
    </view>
    <view wx:if="{{isEditing}}">
      <textarea class="edit-content" value="{{editContent}}" bindinput="handleInput1"></textarea>
      <button bindtap="submitEdit">æäº¤</button>
      <button bindtap="cancelEdit">å–æ¶ˆ</button>
    </view>
    <view class="post-footer">
      <button data-target-id="{{question.id}}" data-type="2" bindtap="toggleLike">ğŸ‘ {{question.questionLikeCount}} èµ</button>
    </view>
  </view>
  
  <view class="section-title">å›å¤åˆ—è¡¨ï¼š</view>
<view wx:if="{{mainAnswers.length === 0}}" class="empty-message">ç­‰ä½ æ¥å›å¤</view>
<block wx:else>
  <block wx:for="{{mainAnswers}}" wx:key="answerId">
    <view class="answer-item">
      <image src="{{item.avatar}}" class="avatar" />
      <view class="answer-content">
        <text class="username">{{item.accountname}}</text>
        <rich-text nodes="{{item.answerContent}}" class="content"></rich-text>
        <text class="timestamp">{{formatTime(item.acreateTime)}}</text>
        <button data-answer-id="{{item.answerId}}" bindtap="toggleEditor">å›å¤</button>
      </view>
    </view>
  </block>
</block>
  
<button type="primary" bindtap="toggleEditor">{{showEditor ? 'å–æ¶ˆå›ç­”' : 'å‘å¸ƒå›ç­”'}}</button>
<view wx:if="{{showEditor}}" class="editor-container">
  <input class="input" placeholder="è¯·è¾“å…¥å¾…åŠäº‹é¡¹" bindinput="handleInput" value="{{answerContent}}" />
  <button type="primary" bindtap="submitAnswer">å‘å¸ƒ</button>
</view>

</view>
